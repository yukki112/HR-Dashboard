<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="style1.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <title>Performance Management</title>
    <style>
      /* Filter controls styling */
.filter-controls {
    display: flex;
    gap: 10px;
    align-items: center;
    background: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.filter-controls select, 
.filter-controls input {
    padding: 8px 12px;
    border: 1px solid #ced4da;
    border-radius: 4px;
    background-color: white;
    font-size: 14px;
    height: 38px;
}

.filter-controls select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 16px 12px;
    padding-right: 2rem;
}

.filter-controls .btn {
    padding: 8px 16px;
    font-size: 14px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    gap: 5px;
}

.filter-controls .btn-outline-secondary {
    border-color: #6c757d;
    color: #6c757d;
}

.filter-controls .btn-outline-secondary:hover {
    background-color: #6c757d;
    color: white;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .filter-controls {
        flex-direction: column;
        align-items: stretch;
    }
    
    .filter-controls select,
    .filter-controls input,
    .filter-controls .btn {
        width: 100% !important;
        margin-right: 0 !important;
    }
}
    </style>
</head>

<body>

<!-- View Modal -->
<div class="modal fade" id="viewModal" tabindex="-1" aria-labelledby="viewModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="viewModalLabel">View Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="viewModalBody">
                <!-- Content will be dynamically inserted here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">Confirm Deletion</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete this record? This action cannot be undone.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
            </div>
        </div>
    </div>
</div>

<!-- Evaluation Modal -->
<div class="modal fade" id="evaluationModal" tabindex="-1">
    <div class="modal-dialog">
        <form class="modal-content" id="evaluationForm">
            <div class="modal-header">
                <h5 class="modal-title">Edit Evaluation</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="evalIndex">
                <input class="form-control mb-2" placeholder="Employee ID" id="evalEmployee" required>
                <input class="form-control mb-2" placeholder="Reviewer ID" id="evalReviewer" required>
                <input class="form-control mb-2" placeholder="Review Period" id="evalPeriod" required>
                <input class="form-control mb-2" type="number" placeholder="Rating" id="evalRating" required>
                <input class="form-control mb-2" type="number" placeholder="Score" id="evalScore" required>
                <select class="form-control mb-2" id="evalStatus" required>
                    <option value="">Select Status</option>
                    <option>Pending</option>
                    <option>Completed</option>
                </select>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-success">Save</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-- Goal Modal -->
<div class="modal fade" id="goalModal" tabindex="-1">
    <div class="modal-dialog">
        <form class="modal-content" id="goalForm">
            <div class="modal-header">
                <h5 class="modal-title">Add Goal</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="goalIndex">
                <input class="form-control mb-2" placeholder="Employee ID" id="goalEmployee" required>
                <input class="form-control mb-2" placeholder="Title" id="goalTitle" required>
                <input class="form-control mb-2" type="date" id="goalStart" required>
                <input class="form-control mb-2" type="date" id="goalEnd" required>
                <input class="form-control mb-2" placeholder="Status" id="goalStatus" required>
                <input class="form-control mb-2" placeholder="Progress" id="goalProgress" required>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-success">Save</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-- Feedback Modal -->
<div class="modal fade" id="feedbackModal" tabindex="-1">
    <div class="modal-dialog">
        <form class="modal-content" id="feedbackForm">
            <div class="modal-header">
                <h5 class="modal-title">Add Feedback</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="fbIndex">
                <input class="form-control mb-2" placeholder="Employee ID" id="fbEmployee" required>
                <input class="form-control mb-2" placeholder="Provider ID" id="fbProvider" required>
                <input class="form-control mb-2" type="date" id="fbDate" required>
                <input class="form-control mb-2" placeholder="Type" id="fbType" required>
                <input class="form-control mb-2" placeholder="Mode" id="fbMode" required>
                <select class="form-control mb-2" id="fbConfidential" required>
                    <option value="">Confidential?</option>
                    <option value="true">Yes</option>
                    <option value="false">No</option>
                </select>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-success">Save</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            </div>
        </form>
    </div>
</div>

<section id="sidebar">
    <a href="#" class="brand">
        <img src="img/Agora.png">
        <span class="text">Agora</span>
    </a>
    <ul class="side-menu top">
        <li>
            <a href="../index.html">
                <i class='bx bxs-dashboard'></i>
                <span class="text">Dashboard</span>
            </a>
        </li>

        <span class="separator">HR 1-2</span>
        
        <li>
            <a href="../NHOES/index.html">
                <i class='bx bxs-user-plus'></i>
                <span class="text">New Hire on Board</span>
            </a>
        </li>
        <li class="active">
            <a href="index.html">
                <i class='bx bxs-bar-chart-alt-2'></i>
                <span class="text">Performance Management</span>
            </a>
        </li>
        <li>
            <a href="#">
                <i class='bx bxs-user-pin'></i>
                <span class="text">Recruitment Management</span>
            </a>
        </li>
        <li>
            <a href="../SocialRecognition/index.html">
                <i class='bx bxs-medal'></i>
                <span class="text">Social Recognition</span>
            </a>
        </li>
        <li>
            <a href="../Compentency/index.html">
                <i class='bx bxs-brain'></i>
                <span class="text">Competency Management</span>
            </a>
        </li>
        <li>
            <a href="../Succession/index.html">
                <i class='bx bxs-group'></i>
                <span class="text">Succession Planning</span>
            </a>
        </li>
        <li>
            <a href="../LearningManagement/index.html">
                <i class='bx bxs-graduation'></i>
                <span class="text">Learning Management</span>
            </a>
        </li>

        <span class="separator">HR 3-4</span>

        <li>
            <a href="../Leavemangement/index.html">
                <i class='bx bxs-calendar-check'></i>
                <span class="text">Leave Management</span>
            </a>
        </li>
        <li>
            <a href="../timeandattendance/index.html">
                <i class='bx bxs-time'></i>
                <span class="text">Time and Attendance</span>
            </a>
        </li>
        <li>
            <a href="../Claims/index.html">
                <i class='bx bxs-receipt'></i>
                <span class="text">Claims and Reimbursement</span>
            </a>
        </li>
        <li>
            <a href="../Payroll/index.html">
                <i class='bx bxs-bank'></i>
                <span class="text">Payroll</span>
            </a>
        </li>
        <li>
            <a href="#">
                <i class='bx bxs-wallet'></i>
                <span class="text">Compensation and Administration</span>
            </a>
        </li>
        <li>
            <a href="../HRanalytics/index.html">
                <i class='bx bxs-bar-chart-square'></i>
                <span class="text">HR Analytics</span>
            </a>
        </li>
        <li>
            <a href="../Corehuman/index.html">
                <i class='bx bxs-user-badge'></i>
                <span class="text">Core Human Management</span>
            </a>
        </li>
    </ul>

    <ul class="side-menu">
        <span class="separator">SETTINGS</span>
        <li>
            <a href="../Settings.html">
                <i class='bx bxs-cog'></i>
                <span class="text">Settings</span>
            </a>
        </li>
        <li>
            <a href="#" class="logout">
                <i class='bx bxs-log-out-circle'></i>
                <span class="text">Logout</span>
            </a>
        </li>
    </ul>
</section>

<section id="content">
    <nav>
        <a href="#" class="nav-link">Categories</a>
        <form action="#">
            <div class="form-input">
                <input type="search" placeholder="Search...">
                <button type="submit" class="search-btn"><i class='bx bx-search'></i></button>
            </div>
        </form>
        
        <input type="checkbox" id="switch-mode" hidden>
        
        <a href="#" class="notification">
            <i class='bx bxs-bell'></i>
            <span class="num">9+</span>
        </a>
        
        <div class="profile-dropdown">
            <a href="#" class="profile" id="profile-btn">
                <img src="img/minji.jpg">
            </a>
            <div class="dropdown-menu" id="dropdown-menu">
                <a href="Profile.html">Profile</a>
                <a href="Changepassword.html">Change Passowrd</a>
            </div>
        </div>
    </nav>

    <main>
        <div class="head-title">
            <div class="left">
                <h1>Performance Management</h1>
                <ul class="breadcrumb">
                    <li>
                        <a href="#">Dashboard</a>
                    </li>
                    <li><i class='bx bx-chevron-right'></i></li>
                    <li>
                        <a class="active" href="#">Performance Management</a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="openTab(event, 'analytics')">
                    <i class='bx bxs-dashboard'></i> Analytics
                </button>
                <button class="tab-button" onclick="openTab(event, 'goals')">Goal Setting</button>
                <button class="tab-button" onclick="openTab(event, 'evaluations')">Evaluation Reviews</button>
                <button class="tab-button" onclick="openTab(event, 'feedback')">Feedback Sessions</button>
            </div>
            
            <div id="analytics" class="tab-content active">
                <div class="dashboard-container">
                    <h3 class="dashboard-title">Performance Analytics Dashboard</h3>
                    
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-title">Average Rating</div>
                            <div class="metric-value">4.2</div>
                            <div class="metric-change positive">↑ 0.3 from last quarter</div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-title">Goals Completed</div>
                            <div class="metric-value">78%</div>
                            <div class="metric-change positive">↑ 12% from last year</div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-title">Pending Evaluations</div>
                            <div class="metric-value">24</div>
                            <div class="metric-change negative">↓ 8 from last month</div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-title">Feedback Sessions</div>
                            <div class="metric-value">142</div>
                            <div class="metric-change positive">↑ 18 from last quarter</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="evaluationChart"></canvas>
                    </div>
                    
                    <div class="chart-container" style="margin-top: 20px;">
                        <canvas id="goalChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div id="goals" class="tab-content">
                <div class="table-container">
                    <h3 class="table-title">Employee Goals</h3>
                    <div class="table-controls mb-3">
                        <button class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#goalModal">
                            <i class="fas fa-plus"></i> Add Goal
                        </button>
                        <div class="filter-controls">
                            <input type="text" id="goalEmployeeFilter" class="form-control me-2" placeholder="Filter by Employee ID" style="width: 200px;">
                            <select id="goalStatusFilter" class="form-control me-2" style="width: 200px;">
                                <option value="">All Statuses</option>
                                <option>Not Started</option>
                                <option>In Progress</option>
                                <option>Completed</option>
                            </select>
                            <button class="btn btn-outline-secondary" id="resetGoalFilters">
                                <i class="fas fa-undo"></i> Reset
                            </button>
                        </div>
                    </div>
                    <table class="table table-bordered table-hover align-middle">
                        <thead>
                            <tr>
                                <th>Goal ID</th>
                                <th>Employee ID</th>
                                <th>Title</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Status</th>
                                <th>Progress</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="goalTable"></tbody>
                    </table>
                </div>
            </div>
            
            <div id="evaluations" class="tab-content">
                <div class="table-container">
                    <h3 class="table-title">Evaluation Reviews</h3>
                    <div class="table-controls mb-3">
                        <button class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#evaluationModal">
                            <i class="fas fa-plus"></i> Add Evaluation
                        </button>
                        <div class="filter-controls">
                            <input type="text" id="evalEmployeeFilter" class="form-control me-2" placeholder="Filter by Employee ID" style="width: 200px;">
                            <input type="text" id="evalPeriodFilter" class="form-control me-2" placeholder="Filter by Period" style="width: 200px;">
                            <select id="evalStatusFilter" class="form-control me-2" style="width: 200px;">
                                <option value="">All Statuses</option>
                                <option>Pending</option>
                                <option>Completed</option>
                            </select>
                            <button class="btn btn-outline-secondary" id="resetEvalFilters">
                                <i class="fas fa-undo"></i> Reset
                            </button>
                        </div>
                    </div>
                    <table class="table table-bordered table-hover align-middle">
                        <thead>
                            <tr>
                                <th>Review ID</th>
                                <th>Employee ID</th>
                                <th>Reviewer ID</th>
                                <th>Period</th>
                                <th>Rating</th>
                                <th>Score</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="evaluationTable"></tbody>
                    </table>
                </div>
            </div>
            
            <div id="feedback" class="tab-content">
                <div class="table-container">
                    <h3 class="table-title">Feedback Sessions</h3>
                    <div class="table-controls mb-3">
                        <button class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#feedbackModal">
                            <i class="fas fa-plus"></i> Add Feedback
                        </button>
                        <div class="filter-controls">
                            <input type="text" id="fbEmployeeFilter" class="form-control me-2" placeholder="Filter by Employee ID" style="width: 200px;">
                            <input type="date" id="fbDateFilter" class="form-control me-2" style="width: 200px;">
                            <select id="fbTypeFilter" class="form-control me-2" style="width: 200px;">
                                <option value="">All Types</option>
                                <option>Positive</option>
                                <option>Constructive</option>
                                <option>Negative</option>
                            </select>
                            <button class="btn btn-outline-secondary" id="resetFbFilters">
                                <i class="fas fa-undo"></i> Reset
                            </button>
                        </div>
                    </div>
                    <table class="table table-bordered table-hover align-middle">
                        <thead>
                            <tr>
                                <th>Feedback ID</th>
                                <th>Employee ID</th>
                                <th>Provider ID</th>
                                <th>Date</th>
                                <th>Type</th>
                                <th>Mode</th>
                                <th>Confidential</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="feedbackTable"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Initialize Bootstrap tooltips
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })

    // Initialize modals
    var viewModal = new bootstrap.Modal(document.getElementById('viewModal'))
    var deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'))
    var evalModal = new bootstrap.Modal(document.getElementById('evaluationModal'))
    var goalModal = new bootstrap.Modal(document.getElementById('goalModal'))
    var fbModal = new bootstrap.Modal(document.getElementById('feedbackModal'))

    // Profile dropdown functionality
    document.getElementById("profile-btn").addEventListener("click", function(event) {
        event.preventDefault()
        document.getElementById("dropdown-menu").classList.toggle("show")
    })
    
    document.addEventListener("click", function(event) {
        if (!document.getElementById("profile-btn").contains(event.target)) {
            document.getElementById("dropdown-menu").classList.remove("show")
        }
    })

    function openTab(evt, tabName) {
        var i, tabcontent, tabbuttons
        
        // Hide all tab content
        tabcontent = document.getElementsByClassName("tab-content")
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].classList.remove("active")
        }
        
        // Remove active class from all tab buttons
        tabbuttons = document.getElementsByClassName("tab-button")
        for (i = 0; i < tabbuttons.length; i++) {
            tabbuttons[i].classList.remove("active")
        }
        
        // Show the current tab and add active class to the button
        document.getElementById(tabName).classList.add("active")
        evt.currentTarget.classList.add("active")
    }

    // Dummy Data
    let evaluations = [
        { employee: "EMP001", reviewer: "REV001", period: "Q1 2025", rating: 4.5, score: 90, status: "Completed" },
        { employee: "EMP002", reviewer: "REV002", period: "Q1 2025", rating: 3.8, score: 76, status: "Completed" },
        { employee: "EMP003", reviewer: "REV003", period: "Q1 2025", rating: 4.9, score: 98, status: "Pending" },
        { employee: "EMP004", reviewer: "REV001", period: "Q2 2025", rating: 4.2, score: 84, status: "Completed" },
        { employee: "EMP005", reviewer: "REV002", period: "Q2 2025", rating: 3.5, score: 70, status: "Pending" },
        { employee: "EMP006", reviewer: "REV003", period: "Q2 2025", rating: 4.0, score: 80, status: "Completed" },
        { employee: "EMP007", reviewer: "REV001", period: "Q1 2025", rating: 3.7, score: 74, status: "Completed" },
        { employee: "EMP008", reviewer: "REV002", period: "Q2 2025", rating: 4.6, score: 92, status: "Completed" },
        { employee: "EMP009", reviewer: "REV003", period: "Q1 2025", rating: 4.1, score: 82, status: "Pending" },
        { employee: "EMP010", reviewer: "REV001", period: "Q2 2025", rating: 3.9, score: 78, status: "Completed" },
        { employee: "EMP011", reviewer: "REV002", period: "Q1 2025", rating: 4.3, score: 86, status: "Completed" },
        { employee: "EMP012", reviewer: "REV003", period: "Q2 2025", rating: 3.6, score: 72, status: "Pending" },
        { employee: "EMP013", reviewer: "REV001", period: "Q1 2025", rating: 4.8, score: 96, status: "Completed" },
        { employee: "EMP014", reviewer: "REV002", period: "Q2 2025", rating: 3.4, score: 68, status: "Completed" },
        { employee: "EMP015", reviewer: "REV003", period: "Q1 2025", rating: 4.7, score: 94, status: "Pending" },
        { employee: "EMP016", reviewer: "REV001", period: "Q2 2025", rating: 4.0, score: 80, status: "Completed" },
        { employee: "EMP017", reviewer: "REV002", period: "Q1 2025", rating: 3.8, score: 76, status: "Completed" },
        { employee: "EMP018", reviewer: "REV003", period: "Q2 2025", rating: 4.5, score: 90, status: "Pending" },
        { employee: "EMP019", reviewer: "REV001", period: "Q1 2025", rating: 4.1, score: 82, status: "Completed" },
        { employee: "EMP020", reviewer: "REV002", period: "Q2 2025", rating: 3.9, score: 78, status: "Completed" }
    ];

    let goals = [
        { employee: "EMP001", title: "Improve Sales", start: "2025-01-01", end: "2025-06-30", status: "In Progress", progress: "60%" },
        { employee: "EMP002", title: "Launch New Campaign", start: "2025-02-15", end: "2025-07-15", status: "Not Started", progress: "0%" },
        { employee: "EMP003", title: "Reduce Bug Count", start: "2025-01-10", end: "2025-05-10", status: "Completed", progress: "100%" },
        { employee: "EMP001", title: "Learn New Framework", start: "2025-03-01", end: "2025-09-01", status: "In Progress", progress: "30%" },
        { employee: "EMP004", title: "Increase Customer Satisfaction", start: "2025-01-20", end: "2025-12-31", status: "In Progress", progress: "45%" },
        { employee: "EMP005", title: "Expand Market Reach", start: "2025-04-01", end: "2025-10-01", status: "Not Started", progress: "0%" },
        { employee: "EMP006", title: "Develop Mobile App", start: "2025-02-10", end: "2025-08-10", status: "In Progress", progress: "50%" },
        { employee: "EMP007", title: "Optimize Website", start: "2025-03-15", end: "2025-09-15", status: "Completed", progress: "100%" },
        { employee: "EMP008", title: "Enhance Security", start: "2025-01-05", end: "2025-06-05", status: "In Progress", progress: "70%" },
        { employee: "EMP009", title: "Improve Team Collaboration", start: "2025-05-01", end: "2025-11-01", status: "Not Started", progress: "0%" },
        { employee: "EMP010", title: "Reduce Costs", start: "2025-02-20", end: "2025-08-20", status: "In Progress", progress: "40%" },
        { employee: "EMP011", title: "Increase Productivity", start: "2025-03-25", end: "2025-09-25", status: "Completed", progress: "100%" },
        { employee: "EMP012", title: "Upgrade Equipment", start: "2025-01-15", end: "2025-07-15", status: "In Progress", progress: "55%" },
        { employee: "EMP013", title: "Improve Communication", start: "2025-04-10", end: "2025-10-10", status: "Not Started", progress: "0%" },
        { employee: "EMP014", title: "Increase Social Media Presence", start: "2025-02-05", end: "2025-08-05", status: "In Progress", progress: "35%" },
        { employee: "EMP015", title: "Develop Training Program", start: "2025-03-30", end: "2025-09-30", status: "Completed", progress: "100%" },
        { employee: "EMP016", title: "Improve Customer Support", start: "2025-01-25", end: "2025-07-25", status: "In Progress", progress: "65%" },
        { employee: "EMP017", title: "Automate Reports", start: "2025-04-15", end: "2025-10-15", status: "Not Started", progress: "0%" },
        { employee: "EMP018", title: "Expand Product Line", start: "2025-02-25", end: "2025-08-25", status: "In Progress", progress: "20%" },
        { employee: "EMP019", title: "Improve Onboarding", start: "2025-03-05", end: "2025-09-05", status: "Completed", progress: "100%" }
    ];

    let feedbacks = [
        { employee: "EMP001", provider: "REV001", date: "2025-03-01", type: "Positive", mode: "Email", confidential: false },
        { employee: "EMP002", provider: "REV002", date: "2025-03-15", type: "Constructive", mode: "In-Person", confidential: true },
        { employee: "EMP003", provider: "REV003", date: "2025-03-20", type: "Positive", mode: "Video Call", confidential: false },
        { employee: "EMP001", provider: "REV002", date: "2025-04-05", type: "Constructive", mode: "Email", confidential: false },
        { employee: "EMP004", provider: "REV001", date: "2025-04-10", type: "Positive", mode: "In-Person", confidential: true },
        { employee: "EMP005", provider: "REV003", date: "2025-04-15", type: "Negative", mode: "Phone", confidential: false },
        { employee: "EMP006", provider: "REV002", date: "2025-04-20", type: "Positive", mode: "Email", confidential: false },
        { employee: "EMP007", provider: "REV001", date: "2025-04-25", type: "Constructive", mode: "In-Person", confidential: true },
        { employee: "EMP008", provider: "REV003", date: "2025-05-01", type: "Positive", mode: "Video Call", confidential: false },
        { employee: "EMP009", provider: "REV002", date: "2025-05-05", type: "Negative", mode: "Phone", confidential: false },
        { employee: "EMP010", provider: "REV001", date: "2025-05-10", type: "Constructive", mode: "Email", confidential: true },
        { employee: "EMP011", provider: "REV003", date: "2025-05-15", type: "Positive", mode: "In-Person", confidential: false },
        { employee: "EMP012", provider: "REV002", date: "2025-05-20", type: "Negative", mode: "Phone", confidential: false },
        { employee: "EMP013", provider: "REV001", date: "2025-05-25", type: "Positive", mode: "Email", confidential: false },
        { employee: "EMP014", provider: "REV003", date: "2025-06-01", type: "Constructive", mode: "In-Person", confidential: true },
        { employee: "EMP015", provider: "REV002", date: "2025-06-05", type: "Positive", mode: "Video Call", confidential: false },
        { employee: "EMP016", provider: "REV001", date: "2025-06-10", type: "Negative", mode: "Phone", confidential: false },
        { employee: "EMP017", provider: "REV003", date: "2025-06-15", type: "Constructive", mode: "Email", confidential: true },
        { employee: "EMP018", provider: "REV002", date: "2025-06-20", type: "Positive", mode: "In-Person", confidential: false },
        { employee: "EMP019", provider: "REV001", date: "2025-06-25", type: "Negative", mode: "Phone", confidential: false }
    ];

    // Current item to delete
    let itemToDelete = { type: null, index: null };

    // Render all tables
    function renderTables() {
        renderEvaluationTable();
        renderGoalTable();
        renderFeedbackTable();
    }

    // Render evaluation table with filtering
    function renderEvaluationTable() {
        const employeeFilter = document.getElementById('evalEmployeeFilter').value.toLowerCase();
        const periodFilter = document.getElementById('evalPeriodFilter').value.toLowerCase();
        const statusFilter = document.getElementById('evalStatusFilter').value;
        
        const filtered = evaluations.filter(e => 
            e.employee.toLowerCase().includes(employeeFilter) &&
            e.period.toLowerCase().includes(periodFilter) &&
            (statusFilter === "" || e.status === statusFilter)
        );
        
        document.getElementById("evaluationTable").innerHTML = filtered.map((e, i) => `
            <tr>
                <td>${i + 1}</td>
                <td>${e.employee}</td>
                <td>${e.reviewer}</td>
                <td>${e.period}</td>
                <td>${e.rating}</td>
                <td>${e.score}</td>
                <td>${e.status}</td>
                <td>
                    <button class="btn btn-sm btn-primary me-1 view-btn" onclick="viewEvaluation(${evaluations.indexOf(e)})">View</button>
                    <button class="btn btn-sm btn-info me-1" onclick="editEvaluation(${evaluations.indexOf(e)})">Edit</button>
                    <button class="btn btn-sm btn-danger delete-btn" onclick="confirmDelete('evaluation', ${evaluations.indexOf(e)})">Delete</button>
                </td>
            </tr>`).join('');
    }

    // Render goal table with filtering
    function renderGoalTable() {
        const employeeFilter = document.getElementById('goalEmployeeFilter').value.toLowerCase();
        const statusFilter = document.getElementById('goalStatusFilter').value;
        
        const filtered = goals.filter(g => 
            g.employee.toLowerCase().includes(employeeFilter) &&
            (statusFilter === "" || g.status === statusFilter)
        );
        
        document.getElementById("goalTable").innerHTML = filtered.map((g, i) => `
            <tr>
                <td>${i + 1}</td>
                <td>${g.employee}</td>
                <td>${g.title}</td>
                <td>${g.start}</td>
                <td>${g.end}</td>
                <td>${g.status}</td>
                <td>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: ${g.progress}" aria-valuenow="${parseInt(g.progress)}" aria-valuemin="0" aria-valuemax="100">${g.progress}</div>
                    </div>
                </td>
                <td>
                    <button class="btn btn-sm btn-primary me-1 view-btn" onclick="viewGoal(${goals.indexOf(g)})">View</button>
                    <button class="btn btn-sm btn-info me-1" onclick="editGoal(${goals.indexOf(g)})">Edit</button>
                    <button class="btn btn-sm btn-danger delete-btn" onclick="confirmDelete('goal', ${goals.indexOf(g)})">Delete</button>
                </td>
            </tr>`).join('');
    }

    // Render feedback table with filtering
    function renderFeedbackTable() {
        const employeeFilter = document.getElementById('fbEmployeeFilter').value.toLowerCase();
        const dateFilter = document.getElementById('fbDateFilter').value;
        const typeFilter = document.getElementById('fbTypeFilter').value;
        
        const filtered = feedbacks.filter(f => 
            f.employee.toLowerCase().includes(employeeFilter) &&
            (dateFilter === "" || f.date === dateFilter) &&
            (typeFilter === "" || f.type === typeFilter)
        );
        
        document.getElementById("feedbackTable").innerHTML = filtered.map((f, i) => `
            <tr>
                <td>${i + 1}</td>
                <td>${f.employee}</td>
                <td>${f.provider}</td>
                <td>${f.date}</td>
                <td>${f.type}</td>
                <td>${f.mode}</td>
                <td>${f.confidential ? "Yes" : "No"}</td>
                <td>
                    <button class="btn btn-sm btn-primary me-1 view-btn" onclick="viewFeedback(${feedbacks.indexOf(f)})">View</button>
                    <button class="btn btn-sm btn-info me-1" onclick="editFeedback(${feedbacks.indexOf(f)})">Edit</button>
                    <button class="btn btn-sm btn-danger delete-btn" onclick="confirmDelete('feedback', ${feedbacks.indexOf(f)})">Delete</button>
                </td>
            </tr>`).join('');
    }

    // View functions
    function viewEvaluation(index) {
        const e = evaluations[index];
        document.getElementById('viewModalBody').innerHTML = `
            <h6>Evaluation Details</h6>
            <p><strong>Employee ID:</strong> ${e.employee}</p>
            <p><strong>Reviewer ID:</strong> ${e.reviewer}</p>
            <p><strong>Period:</strong> ${e.period}</p>
            <p><strong>Rating:</strong> ${e.rating}</p>
            <p><strong>Score:</strong> ${e.score}</p>
            <p><strong>Status:</strong> ${e.status}</p>
        `;
        viewModal.show();
    }

    function viewGoal(index) {
        const g = goals[index];
        document.getElementById('viewModalBody').innerHTML = `
            <h6>Goal Details</h6>
            <p><strong>Employee ID:</strong> ${g.employee}</p>
            <p><strong>Title:</strong> ${g.title}</p>
            <p><strong>Start Date:</strong> ${g.start}</p>
            <p><strong>End Date:</strong> ${g.end}</p>
            <p><strong>Status:</strong> ${g.status}</p>
            <p><strong>Progress:</strong> ${g.progress}</p>
        `;
        viewModal.show();
    }

    function viewFeedback(index) {
        const f = feedbacks[index];
        document.getElementById('viewModalBody').innerHTML = `
            <h6>Feedback Details</h6>
            <p><strong>Employee ID:</strong> ${f.employee}</p>
            <p><strong>Provider ID:</strong> ${f.provider}</p>
            <p><strong>Date:</strong> ${f.date}</p>
            <p><strong>Type:</strong> ${f.type}</p>
            <p><strong>Mode:</strong> ${f.mode}</p>
            <p><strong>Confidential:</strong> ${f.confidential ? "Yes" : "No"}</p>
        `;
        viewModal.show();
    }

    // Edit functions
    function editEvaluation(index) {
        const e = evaluations[index];
        document.getElementById('evalIndex').value = index;
        document.getElementById('evalEmployee').value = e.employee;
        document.getElementById('evalReviewer').value = e.reviewer;
        document.getElementById('evalPeriod').value = e.period;
        document.getElementById('evalRating').value = e.rating;
        document.getElementById('evalScore').value = e.score;
        document.getElementById('evalStatus').value = e.status;
        evalModal.show();
    }

    function editGoal(index) {
        const g = goals[index];
        document.getElementById('goalIndex').value = index;
        document.getElementById('goalEmployee').value = g.employee;
        document.getElementById('goalTitle').value = g.title;
        document.getElementById('goalStart').value = g.start;
        document.getElementById('goalEnd').value = g.end;
        document.getElementById('goalStatus').value = g.status;
        document.getElementById('goalProgress').value = g.progress;
        goalModal.show();
    }

    function editFeedback(index) {
        const f = feedbacks[index];
        document.getElementById('fbIndex').value = index;
        document.getElementById('fbEmployee').value = f.employee;
        document.getElementById('fbProvider').value = f.provider;
        document.getElementById('fbDate').value = f.date;
        document.getElementById('fbType').value = f.type;
        document.getElementById('fbMode').value = f.mode;
        document.getElementById('fbConfidential').value = f.confidential.toString();
        fbModal.show();
    }

    // Delete functions
    function confirmDelete(type, index) {
        itemToDelete = { type, index };
        deleteModal.show();
    }

    document.getElementById('confirmDeleteBtn').addEventListener('click', function() {
        if (itemToDelete.type === 'evaluation') {
            evaluations.splice(itemToDelete.index, 1);
        } else if (itemToDelete.type === 'goal') {
            goals.splice(itemToDelete.index, 1);
        } else if (itemToDelete.type === 'feedback') {
            feedbacks.splice(itemToDelete.index, 1);
        }
        renderTables();
        deleteModal.hide();
    });

    // Form submission handlers
    document.getElementById("evaluationForm").addEventListener("submit", function(e) {
        e.preventDefault();
        const index = document.getElementById('evalIndex').value;
        const entry = {
            employee: document.getElementById('evalEmployee').value,
            reviewer: document.getElementById('evalReviewer').value,
            period: document.getElementById('evalPeriod').value,
            rating: parseFloat(document.getElementById('evalRating').value),
            score: parseInt(document.getElementById('evalScore').value),
            status: document.getElementById('evalStatus').value
        };
        
        if (index === '') {
            evaluations.push(entry);
        } else {
            evaluations[index] = entry;
        }
        
        evalModal.hide();
        this.reset();
        renderTables();
    });

    document.getElementById("goalForm").addEventListener("submit", function(e) {
        e.preventDefault();
        const index = document.getElementById('goalIndex').value;
        const entry = {
            employee: document.getElementById('goalEmployee').value,
            title: document.getElementById('goalTitle').value,
            start: document.getElementById('goalStart').value,
            end: document.getElementById('goalEnd').value,
            status: document.getElementById('goalStatus').value,
            progress: document.getElementById('goalProgress').value
        };
        
        if (index === '') {
            goals.push(entry);
        } else {
            goals[index] = entry;
        }
        
        goalModal.hide();
        this.reset();
        renderTables();
    });

    document.getElementById("feedbackForm").addEventListener("submit", function(e) {
        e.preventDefault();
        const index = document.getElementById('fbIndex').value;
        const entry = {
            employee: document.getElementById('fbEmployee').value,
            provider: document.getElementById('fbProvider').value,
            date: document.getElementById('fbDate').value,
            type: document.getElementById('fbType').value,
            mode: document.getElementById('fbMode').value,
            confidential: document.getElementById('fbConfidential').value === "true"
        };
        
        if (index === '') {
            feedbacks.push(entry);
        } else {
            feedbacks[index] = entry;
        }
        
        fbModal.hide();
        this.reset();
        renderTables();
    });

    // Filter reset handlers
    document.getElementById('resetEvalFilters').addEventListener('click', function() {
        document.getElementById('evalEmployeeFilter').value = '';
        document.getElementById('evalPeriodFilter').value = '';
        document.getElementById('evalStatusFilter').value = '';
        renderEvaluationTable();
    });

    document.getElementById('resetGoalFilters').addEventListener('click', function() {
        document.getElementById('goalEmployeeFilter').value = '';
        document.getElementById('goalStatusFilter').value = '';
        renderGoalTable();
    });

    document.getElementById('resetFbFilters').addEventListener('click', function() {
        document.getElementById('fbEmployeeFilter').value = '';
        document.getElementById('fbDateFilter').value = '';
        document.getElementById('fbTypeFilter').value = '';
        renderFeedbackTable();
    });

    // Filter change handlers
    document.getElementById('evalEmployeeFilter').addEventListener('input', renderEvaluationTable);
    document.getElementById('evalPeriodFilter').addEventListener('input', renderEvaluationTable);
    document.getElementById('evalStatusFilter').addEventListener('change', renderEvaluationTable);
    document.getElementById('goalEmployeeFilter').addEventListener('input', renderGoalTable);
    document.getElementById('goalStatusFilter').addEventListener('change', renderGoalTable);
    document.getElementById('fbEmployeeFilter').addEventListener('input', renderFeedbackTable);
    document.getElementById('fbDateFilter').addEventListener('change', renderFeedbackTable);
    document.getElementById('fbTypeFilter').addEventListener('change', renderFeedbackTable);

    // Render charts
    function renderCharts() {
        // Evaluation Ratings Bar Chart
        const evalCtx = document.getElementById('evaluationChart');
        if (evalCtx) {
            new Chart(evalCtx, {
                type: 'bar',
                data: {
                    labels: evaluations.map(e => e.employee),
                    datasets: [{
                        label: 'Rating',
                        data: evaluations.map(e => e.rating),
                        backgroundColor: '#4e73df'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Average Evaluation Rating per Employee',
                            font: { size: 16 }
                        }
                    }
                }
            });
        }

        // Goal Progress Chart
        const goalCtx = document.getElementById('goalChart');
        if (goalCtx) {
            new Chart(goalCtx, {
                type: 'bar',
                data: {
                    labels: goals.map(g => g.employee),
                    datasets: [{
                        label: 'Progress (%)',
                        data: goals.map(g => parseInt(g.progress)),
                        backgroundColor: '#1cc88a'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Goal Progress by Employee',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        y: {
                            max: 100
                        }
                    }
                }
            });
        }
    }

    // Initialize everything when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        renderTables();
        renderCharts();
    });
</script>
</body>
</html>