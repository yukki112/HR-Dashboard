<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="style1.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <title>Leave Management</title>
    <style>
        .table-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .chart-container {
            height: 300px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            position: relative;
        }
        
        .table-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #333;
            font-weight: 600;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
        
        tr:hover {
            background-color: #f5f5f5;
        }
        
        .badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .badge-primary {
            background-color: #007bff;
            color: white;
        }
        
        .badge-success {
            background-color: #28a745;
            color: white;
        }
        
        .badge-warning {
            background-color: #ffc107;
            color: #212529;
        }
        
        .badge-danger {
            background-color: #dc3545;
            color: white;
        }
        
        .badge-info {
            background-color: #17a2b8;
            color: white;
        }
        
        .tab-container {
            margin-bottom: 20px;
        }
        
        .tab-buttons {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab-button {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            color: #666;
            border-bottom: 3px solid transparent;
        }
        
        .tab-button.active {
            color: #007bff;
            border-bottom: 3px solid #007bff;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .action-buttons {
            display: flex;
            gap: 5px;
        }
        
        .btn-edit {
            background-color: #ffc107;
            color: #212529;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .btn-delete {
            background-color: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .btn-view {
            background-color: #17a2b8;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .btn-edit:hover {
            background-color: #e0a800;
        }
        
        .btn-delete:hover {
            background-color: #c82333;
        }
        
        .btn-view:hover {
            background-color: #138496;
        }
        
        .btn-approve {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .btn-approve:hover {
            background-color: #218838;
        }
        
        .btn-reject {
            background-color: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .btn-reject:hover {
            background-color: #c82333;
        }
        
        /* Dashboard Styles */
        .dashboard-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .dashboard-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #333;
            font-weight: 600;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .metric-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
        }
        
        .metric-title {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .metric-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
        }
        
        .metric-change {
            font-size: 0.8rem;
            margin-top: 5px;
        }
        
        .metric-change.positive {
            color: #28a745;
        }
        
        .metric-change.negative {
            color: #dc3545;
        }
        
        .form-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .form-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #333;
            font-weight: 600;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .form-select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .btn-submit {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }
        
        .btn-submit:hover {
            background-color: #0069d9;
        }
        
        /* Filter controls styling */
        .filter-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-controls select, 
        .filter-controls input {
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            background-color: white;
            font-size: 14px;
            height: 38px;
        }

        .filter-controls select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 16px 12px;
            padding-right: 2rem;
        }

        .filter-controls .btn {
            padding: 8px 16px;
            font-size: 14px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .filter-controls .btn-outline-secondary {
            border-color: #6c757d;
            color: #6c757d;
        }

        .filter-controls .btn-outline-secondary:hover {
            background-color: #6c757d;
            color: white;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .filter-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-controls select,
            .filter-controls input,
            .filter-controls .btn {
                width: 100% !important;
                margin-right: 0 !important;
            }
        }
    </style>
</head>
<body>

<!-- View Modal -->
<div class="modal fade" id="viewModal" tabindex="-1" aria-labelledby="viewModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="viewModalLabel">View Leave Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="viewModalBody">
                <!-- Content will be dynamically inserted here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Edit Modal -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Edit Leave Record</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="editModalBody">
                <!-- Content will be dynamically inserted here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveChangesBtn">Save Changes</button>
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">Confirm Deletion</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete this record? This action cannot be undone.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
            </div>
        </div>
    </div>
</div>

<section id="sidebar">
    <a href="#" class="brand">
        <img src="img/Agora.png">
        <span class="text">Agora</span>
    </a>
    <ul class="side-menu top">
        <li>
            <a href="../index.html">
                <i class='bx bxs-dashboard'></i>
                <span class="text">Dashboard</span>
            </a>
        </li>

        <span class="separator">HR 1-2</span>
        
        <li>
            <a href="#">
                <i class='bx bxs-user-plus'></i>
                <span class="text">New Hire on Board</span>
            </a>
        </li>
        <li>
            <a href="../Performance/index.html">
                <i class='bx bxs-bar-chart-alt-2' ></i>
                <span class="text">Performance Management</span>
            </a>
        </li>
        <li>
            <a href="#">
                <i class='bx bxs-user-pin' ></i>
                <span class="text">Recruitment Management</span>
            </a>
        </li>
        <li>
            <a href="../SocialRecognition/index.html">
                <i class='bx bxs-medal' ></i>
                <span class="text">Social Recognition</span>
            </a>
        </li>
        <li>
            <a href="../Compentency/index.html">
                <i class='bx bxs-brain' ></i>
                <span class="text">Competency Management</span>
            </a>
        </li>
        <li>
            <a href="../Succession/index.html">
                <i class='bx bxs-group' ></i>
                <span class="text">Succession Planning</span>
            </a>
        </li>
        <li>
            <a href="../LearningManagement/index.html">
                <i class='bx bxs-graduation' ></i>
                <span class="text">Learning Management</span>
            </a>
        </li>

        <span class="separator">HR 3-4</span>

        <li class="active">
            <a href="#">
                <i class='bx bxs-calendar-check' ></i>
                <span class="text">Leave Management</span>
            </a>
        </li>
        <li>
            <a href="../timeandattendance/index.html">
                <i class='bx bxs-time' ></i>
                <span class="text">Time and Attendance</span>
            </a>
        </li>
        <li>
            <a href="../Claims/index.html">
                <i class='bx bxs-receipt' ></i>
                <span class="text">Claims and Reimbursement</span>
            </a>
        </li>
        <li>
            <a href="../Payroll/index.html">
                <i class='bx bxs-bank' ></i>
                <span class="text">Payroll</span>
            </a>
        </li>
        <li>
            <a href="#">
                <i class='bx bxs-wallet' ></i>
                <span class="text">Compensation and Administration</span>
            </a>
        </li>
        <li>
            <a href="../HRanalytics/index.html">
                <i class='bx bxs-bar-chart-square' ></i>
                <span class="text">HR Analytics</span>
            </a>
        </li>
        <li>
            <a href="../Corehuman/index.html">
                <i class='bx bxs-user-badge' ></i>
                <span class="text">Core Human Management</span>
            </a>
        </li>
    </ul>

    <ul class="side-menu">
        <span class="separator">SETTINGS</span>
        <li>
            <a href="#">
                <i class='bx bxs-cog'></i>
                <span class="text">Settings</span>
            </a>
        </li>
        <li>
            <a href="#" class="logout">
                <i class='bx bxs-log-out-circle'></i>
                <span class="text">Logout</span>
            </a>
        </li>
    </ul>
</section>

<section id="content">
    <nav>
       
        <a href="#" class="nav-link">Leave Management</a>
        <form action="#">
            <div class="form-input">
                <input type="search" placeholder="Search...">
                <button type="submit" class="search-btn"><i class='bx bx-search'></i></button>
            </div>
        </form>
        
        <input type="checkbox" id="switch-mode" hidden>
        
        <a href="#" class="notification">
            <i class='bx bxs-bell'></i>
            <span class="num">9+</span>
        </a>
        
        <div class="profile-dropdown">
            <a href="#" class="profile" id="profile-btn">
                <img src="img/minji.jpg">
            </a>
            <div class="dropdown-menu" id="dropdown-menu">
                <a href="Profile.html">Profile</a>
                <a href="Changepassword.html">Change Passowrd</a>
            </div>
        </div>
    </nav>

    <main>
        <div class="head-title">
            <div class="left">
                <h1>Leave Management</h1>
                <ul class="breadcrumb">
                    <li>
                        <a href="#">Dashboard</a>
                    </li>
                    <li><i class='bx bx-chevron-right' ></i></li>
                    <li>
                        <a class="active" href="#">Leave Management</a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="openTab(event, 'dashboard')">
                    <i class='bx bxs-dashboard'></i> Dashboard
                </button>
                <button class="tab-button" onclick="openTab(event, 'requests')">
                    <i class='bx bxs-calendar'></i> Leave Requests
                </button>
                <button class="tab-button" onclick="openTab(event, 'balances')">
                    <i class='bx bxs-user-account'></i> Leave Balances
                </button>
                <button class="tab-button" onclick="openTab(event, 'types')">
                    <i class='bx bxs-cog'></i> Leave Types
                </button>
               
            </div>
            
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="dashboard-container">
                    <h3 class="dashboard-title">Leave Management Dashboard</h3>
                    
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-title">Pending Approvals</div>
                            <div class="metric-value">12</div>
                            <div class="metric-change">5 new today</div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-title">On Leave Today</div>
                            <div class="metric-value">8</div>
                            <div class="metric-change">2 returning tomorrow</div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-title">Leave Utilization</div>
                            <div class="metric-value">68%</div>
                            <div class="metric-change positive">↓ 5% from last month</div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-title">Annual Leave Remaining</div>
                            <div class="metric-value">14.5</div>
                            <div class="metric-change negative">↓ 2.5 from last quarter</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="leaveTrendChart"></canvas>
                    </div>
                    
                    <div class="chart-container" style="margin-top: 20px;">
                        <canvas id="leaveTypeDistribution"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Leave Requests Tab -->
            <div id="requests" class="tab-content">
                <div class="table-container">
                    <h3 class="table-title">Leave Requests</h3>
                    <div class="filter-controls mb-3">
                        <input type="text" id="requestEmployeeFilter" class="form-control me-2" placeholder="Filter by Employee" style="width: 200px;">
                        <select id="requestTypeFilter" class="form-control me-2" style="width: 200px;">
                            <option value="">All Leave Types</option>
                            <option>Annual Leave</option>
                            <option>Sick Leave</option>
                            <option>Maternity Leave</option>
                            <option>Paternity Leave</option>
                            <option>Unpaid Leave</option>
                        </select>
                        <select id="requestStatusFilter" class="form-control me-2" style="width: 200px;">
                            <option value="">All Statuses</option>
                            <option>Pending</option>
                            <option>Approved</option>
                            <option>Rejected</option>
                        </select>
                        <button class="btn btn-outline-secondary" id="resetRequestFilters">
                            <i class="fas fa-undo"></i> Reset
                        </button>
                    </div>
                    <table class="table table-bordered table-hover align-middle">
                        <thead>
                            <tr>
                                <th>Request ID</th>
                                <th>Employee</th>
                                <th>Leave Type</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Days</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="leaveRequestsTable">
                            <!-- Data will be dynamically inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Leave Balances Tab -->
            <div id="balances" class="tab-content">
                <div class="table-container">
                    <h3 class="table-title">Employee Leave Balances</h3>
                    <div class="filter-controls mb-3">
                        <input type="text" id="balanceEmployeeFilter" class="form-control me-2" placeholder="Filter by Employee" style="width: 200px;">
                        <button class="btn btn-outline-secondary" id="resetBalanceFilters">
                            <i class="fas fa-undo"></i> Reset
                        </button>
                    </div>
                    <table class="table table-bordered table-hover align-middle">
                        <thead>
                            <tr>
                                <th>Employee</th>
                                <th>Annual Leave</th>
                                <th>Sick Leave</th>
                                <th>Maternity Leave</th>
                                <th>Paternity Leave</th>
                                <th>Unpaid Leave</th>
                                <th>Last Updated</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="leaveBalancesTable">
                            <!-- Data will be dynamically inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Leave Types Tab -->
            <div id="types" class="tab-content">
                <div class="table-container">
                    <h3 class="table-title">Leave Types</h3>
                    <div class="filter-controls mb-3">
                        <input type="text" id="typeNameFilter" class="form-control me-2" placeholder="Filter by Leave Type" style="width: 200px;">
                        <button class="btn btn-outline-secondary" id="resetTypeFilters">
                            <i class="fas fa-undo"></i> Reset
                        </button>
                    </div>
                    <table class="table table-bordered table-hover align-middle">
                        <thead>
                            <tr>
                                <th>Leave Type</th>
                                <th>Description</th>
                                <th>Max Days</th>
                                <th>Carry Forward</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="leaveTypesTable">
                            <!-- Data will be dynamically inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
           
    </main>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Initialize Bootstrap tooltips
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })

    // Initialize modals
    var viewModal = new bootstrap.Modal(document.getElementById('viewModal'))
    var editModal = new bootstrap.Modal(document.getElementById('editModal'))
    var deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'))

    // Sample data for leave requests
    let leaveRequests = [
        { id: "LR-1001", employee: "John Smith", type: "Annual Leave", startDate: "2023-11-15", endDate: "2023-11-20", days: 5, status: "Pending" },
        { id: "LR-1002", employee: "Sarah Johnson", type: "Sick Leave", startDate: "2023-11-10", endDate: "2023-11-12", days: 2, status: "Approved" },
        { id: "LR-1003", employee: "Michael Brown", type: "Maternity Leave", startDate: "2023-10-01", endDate: "2024-01-01", days: 90, status: "Approved" },
        { id: "LR-1004", employee: "Emily Davis", type: "Annual Leave", startDate: "2023-12-01", endDate: "2023-12-10", days: 9, status: "Pending" },
        { id: "LR-1005", employee: "Robert Wilson", type: "Unpaid Leave", startDate: "2023-11-05", endDate: "2023-11-07", days: 2, status: "Rejected" },
        { id: "LR-1006", employee: "Jessica Lee", type: "Annual Leave", startDate: "2023-11-22", endDate: "2023-11-25", days: 4, status: "Pending" },
        { id: "LR-1007", employee: "David Kim", type: "Sick Leave", startDate: "2023-11-18", endDate: "2023-11-19", days: 2, status: "Approved" },
        { id: "LR-1008", employee: "Linda Martinez", type: "Annual Leave", startDate: "2023-12-15", endDate: "2023-12-20", days: 6, status: "Pending" },
        { id: "LR-1009", employee: "James Anderson", type: "Paternity Leave", startDate: "2023-11-01", endDate: "2023-11-05", days: 5, status: "Approved" },
        { id: "LR-1010", employee: "Patricia Thomas", type: "Sick Leave", startDate: "2023-11-13", endDate: "2023-11-14", days: 2, status: "Rejected" },
        { id: "LR-1011", employee: "Christopher Garcia", type: "Annual Leave", startDate: "2023-12-05", endDate: "2023-12-09", days: 5, status: "Pending" },
        { id: "LR-1012", employee: "Barbara Rodriguez", type: "Unpaid Leave", startDate: "2023-11-20", endDate: "2023-11-22", days: 3, status: "Approved" },
        { id: "LR-1013", employee: "Paul Walker", type: "Annual Leave", startDate: "2023-12-12", endDate: "2023-12-15", days: 4, status: "Pending" },
        { id: "LR-1014", employee: "Nancy Hall", type: "Sick Leave", startDate: "2023-11-17", endDate: "2023-11-18", days: 2, status: "Approved" },
        { id: "LR-1015", employee: "Steven Allen", type: "Annual Leave", startDate: "2023-12-18", endDate: "2023-12-22", days: 5, status: "Pending" },
        { id: "LR-1016", employee: "Karen Young", type: "Maternity Leave", startDate: "2023-09-15", endDate: "2023-12-15", days: 92, status: "Approved" },
        { id: "LR-1017", employee: "Brian King", type: "Annual Leave", startDate: "2023-11-28", endDate: "2023-12-02", days: 5, status: "Pending" },
        { id: "LR-1018", employee: "Lisa Wright", type: "Unpaid Leave", startDate: "2023-11-23", endDate: "2023-11-24", days: 2, status: "Rejected" },
        { id: "LR-1019", employee: "Kevin Lopez", type: "Annual Leave", startDate: "2023-12-03", endDate: "2023-12-07", days: 5, status: "Approved" },
        { id: "LR-1020", employee: "Susan Hill", type: "Sick Leave", startDate: "2023-11-09", endDate: "2023-11-10", days: 2, status: "Pending" }
    ];

    // Sample data for leave balances
    let leaveBalances = [
        { employee: "John Smith", annual: 12.5, sick: 8, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-01" },
        { employee: "Sarah Johnson", annual: 18, sick: 5, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-05" },
        { employee: "Michael Brown", annual: 15, sick: 10, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-10-15" },
        { employee: "Emily Davis", annual: 20, sick: 10, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-10" },
        { employee: "Robert Wilson", annual: 10, sick: 3, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-08" },
        { employee: "Jessica Lee", annual: 14, sick: 7, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-12" },
        { employee: "David Kim", annual: 16, sick: 6, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-13" },
        { employee: "Linda Martinez", annual: 19, sick: 9, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-14" },
        { employee: "James Anderson", annual: 13, sick: 8, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-15" },
        { employee: "Patricia Thomas", annual: 17, sick: 5, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-16" },
        { employee: "Christopher Garcia", annual: 15, sick: 7, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-17" },
        { employee: "Barbara Rodriguez", annual: 18, sick: 6, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-18" },
        { employee: "Paul Walker", annual: 12, sick: 9, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-19" },
        { employee: "Nancy Hall", annual: 20, sick: 10, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-20" },
        { employee: "Steven Allen", annual: 11, sick: 4, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-21" },
        { employee: "Karen Young", annual: 13, sick: 8, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-22" },
        { employee: "Brian King", annual: 17, sick: 7, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-23" },
        { employee: "Lisa Wright", annual: 16, sick: 6, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-24" },
        { employee: "Kevin Lopez", annual: 14, sick: 5, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-25" },
        { employee: "Susan Hill", annual: 19, sick: 10, maternity: 90, paternity: 5, unpaid: "∞", lastUpdated: "2023-11-26" }
    ];

    // Sample data for leave types
    let leaveTypes = [
        { type: "Annual Leave", description: "Paid time off for vacation or personal reasons", maxDays: 20, carryForward: "Yes (up to 5 days)" },
        { type: "Sick Leave", description: "Paid time off for illness or medical appointments", maxDays: 10, carryForward: "No" },
        { type: "Maternity Leave", description: "Paid time off for new mothers", maxDays: 90, carryForward: "No" },
        { type: "Paternity Leave", description: "Paid time off for new fathers", maxDays: 5, carryForward: "No" },
        { type: "Unpaid Leave", description: "Unpaid time off for personal reasons", maxDays: "∞", carryForward: "No" },
        { type: "Compassionate Leave", description: "Paid leave for bereavement or family emergencies", maxDays: 5, carryForward: "No" },
        { type: "Study Leave", description: "Paid leave for study or exams", maxDays: 10, carryForward: "No" },
        { type: "Marriage Leave", description: "Paid leave for marriage", maxDays: 3, carryForward: "No" },
        { type: "Adoption Leave", description: "Paid leave for adoption of a child", maxDays: 30, carryForward: "No" },
        { type: "Jury Duty", description: "Paid leave for jury service", maxDays: 15, carryForward: "No" },
        { type: "Public Service Leave", description: "Paid leave for public service duties", maxDays: 7, carryForward: "No" },
        { type: "Quarantine Leave", description: "Paid leave for quarantine due to illness", maxDays: 14, carryForward: "No" },
        { type: "Voting Leave", description: "Paid leave for voting in elections", maxDays: 1, carryForward: "No" },
        { type: "Religious Leave", description: "Paid leave for religious observances", maxDays: 2, carryForward: "No" },
        { type: "Military Leave", description: "Paid leave for military service", maxDays: 30, carryForward: "No" },
        { type: "Sabbatical Leave", description: "Extended leave for research or personal development", maxDays: 60, carryForward: "No" },
        { type: "Parental Leave", description: "Paid leave for new parents", maxDays: 30, carryForward: "No" },
        { type: "Volunteer Leave", description: "Paid leave for volunteering activities", maxDays: 5, carryForward: "No" },
        { type: "Emergency Leave", description: "Paid leave for unforeseen emergencies", maxDays: 7, carryForward: "No" },
        { type: "Special Leave", description: "Paid leave for special circumstances", maxDays: 10, carryForward: "No" }
    ];

    // Current item to delete
    let itemToDelete = { type: null, index: null };

    // Render all tables
    function renderTables() {
        renderLeaveRequestsTable();
        renderLeaveBalancesTable();
        renderLeaveTypesTable();
    }

    // Render leave requests table with filtering
    function renderLeaveRequestsTable() {
        const employeeFilter = document.getElementById('requestEmployeeFilter').value.toLowerCase();
        const typeFilter = document.getElementById('requestTypeFilter').value;
        const statusFilter = document.getElementById('requestStatusFilter').value;
        
        const filtered = leaveRequests.filter(request => 
            request.employee.toLowerCase().includes(employeeFilter) &&
            (typeFilter === "" || request.type === typeFilter) &&
            (statusFilter === "" || request.status === statusFilter)
        );
        
        document.getElementById("leaveRequestsTable").innerHTML = filtered.map((request, index) => `
            <tr>
                <td>#${request.id}</td>
                <td>${request.employee}</td>
                <td>${request.type}</td>
                <td>${request.startDate}</td>
                <td>${request.endDate}</td>
                <td>${request.days}</td>
                <td><span class="badge ${getStatusBadgeClass(request.status)}">${request.status}</span></td>
                <td>
                    ${request.status === "Pending" ? `
                        <button class="btn btn-sm btn-success me-1 approve-btn" onclick="approveLeaveRequest(${index})">Approve</button>
                        <button class="btn btn-sm btn-danger me-1 reject-btn" onclick="rejectLeaveRequest(${index})">Reject</button>
                    ` : ''}
                    <button class="btn btn-sm btn-info me-1 view-btn" onclick="viewLeaveRequest(${index})">View</button>
                    <button class="btn btn-sm btn-warning me-1 edit-btn" onclick="editLeaveRequest(${index})">Edit</button>
                    <button class="btn btn-sm btn-danger delete-btn" onclick="confirmDelete('request', ${index})">Delete</button>
                </td>
            </tr>`).join('');
    }

    // Render leave balances table with filtering
    function renderLeaveBalancesTable() {
        const employeeFilter = document.getElementById('balanceEmployeeFilter').value.toLowerCase();
        
        const filtered = leaveBalances.filter(balance => 
            balance.employee.toLowerCase().includes(employeeFilter)
        );
        
        document.getElementById("leaveBalancesTable").innerHTML = filtered.map((balance, index) => `
            <tr>
                <td>${balance.employee}</td>
                <td>${balance.annual}</td>
                <td>${balance.sick}</td>
                <td>${balance.maternity}</td>
                <td>${balance.paternity}</td>
                <td>${balance.unpaid}</td>
                <td>${balance.lastUpdated}</td>
                <td>
                    <button class="btn btn-sm btn-info me-1 view-btn" onclick="viewLeaveBalance(${index})">View</button>
                    <button class="btn btn-sm btn-warning me-1 edit-btn" onclick="editLeaveBalance(${index})">Edit</button>
                </td>
            </tr>`).join('');
    }

    // Render leave types table with filtering
    function renderLeaveTypesTable() {
        const typeFilter = document.getElementById('typeNameFilter').value.toLowerCase();
        
        const filtered = leaveTypes.filter(type => 
            type.type.toLowerCase().includes(typeFilter)
        );
        
        document.getElementById("leaveTypesTable").innerHTML = filtered.map((type, index) => `
            <tr>
                <td>${type.type}</td>
                <td>${type.description}</td>
                <td>${type.maxDays}</td>
                <td>${type.carryForward}</td>
                <td>
                    <button class="btn btn-sm btn-info me-1 view-btn" onclick="viewLeaveType(${index})">View</button>
                    <button class="btn btn-sm btn-warning me-1 edit-btn" onclick="editLeaveType(${index})">Edit</button>
                    <button class="btn btn-sm btn-danger delete-btn" onclick="confirmDelete('type', ${index})">Delete</button>
                </td>
            </tr>`).join('');
    }

    // Helper function to get badge class based on status
    function getStatusBadgeClass(status) {
        switch(status) {
            case "Pending": return "bg-primary";
            case "Approved": return "bg-success";
            case "Rejected": return "bg-danger";
            default: return "bg-secondary";
        }
    }

    // View functions
    function viewLeaveRequest(index) {
        const request = leaveRequests[index];
        document.getElementById('viewModalBody').innerHTML = `
            <h6>Leave Request Details</h6>
            <p><strong>Request ID:</strong> ${request.id}</p>
            <p><strong>Employee:</strong> ${request.employee}</p>
            <p><strong>Leave Type:</strong> ${request.type}</p>
            <p><strong>Start Date:</strong> ${request.startDate}</p>
            <p><strong>End Date:</strong> ${request.endDate}</p>
            <p><strong>Days:</strong> ${request.days}</p>
            <p><strong>Status:</strong> ${request.status}</p>
        `;
        viewModal.show();
    }

    function viewLeaveBalance(index) {
        const balance = leaveBalances[index];
        document.getElementById('viewModalBody').innerHTML = `
            <h6>Leave Balance Details</h6>
            <p><strong>Employee:</strong> ${balance.employee}</p>
            <p><strong>Annual Leave:</strong> ${balance.annual}</p>
            <p><strong>Sick Leave:</strong> ${balance.sick}</p>
            <p><strong>Maternity Leave:</strong> ${balance.maternity}</p>
            <p><strong>Paternity Leave:</strong> ${balance.paternity}</p>
            <p><strong>Unpaid Leave:</strong> ${balance.unpaid}</p>
            <p><strong>Last Updated:</strong> ${balance.lastUpdated}</p>
        `;
        viewModal.show();
    }

    function viewLeaveType(index) {
        const type = leaveTypes[index];
        document.getElementById('viewModalBody').innerHTML = `
            <h6>Leave Type Details</h6>
            <p><strong>Leave Type:</strong> ${type.type}</p>
            <p><strong>Description:</strong> ${type.description}</p>
            <p><strong>Max Days:</strong> ${type.maxDays}</p>
            <p><strong>Carry Forward:</strong> ${type.carryForward}</p>
        `;
        viewModal.show();
    }

    // Edit functions
    function editLeaveRequest(index) {
        const request = leaveRequests[index];
        document.getElementById('editModalBody').innerHTML = `
            <div class="mb-3">
                <label class="form-label">Request ID</label>
                <input type="text" class="form-control" id="editRequestId" value="${request.id}" readonly>
            </div>
            <div class="mb-3">
                <label class="form-label">Employee</label>
                <input type="text" class="form-control" id="editRequestEmployee" value="${request.employee}">
            </div>
            <div class="mb-3">
                <label class="form-label">Leave Type</label>
                <select class="form-select" id="editRequestType">
                    <option ${request.type === 'Annual Leave' ? 'selected' : ''}>Annual Leave</option>
                    <option ${request.type === 'Sick Leave' ? 'selected' : ''}>Sick Leave</option>
                    <option ${request.type === 'Maternity Leave' ? 'selected' : ''}>Maternity Leave</option>
                    <option ${request.type === 'Paternity Leave' ? 'selected' : ''}>Paternity Leave</option>
                    <option ${request.type === 'Unpaid Leave' ? 'selected' : ''}>Unpaid Leave</option>
                </select>
            </div>
            <div class="mb-3">
                <label class="form-label">Start Date</label>
                <input type="date" class="form-control" id="editRequestStartDate" value="${request.startDate}">
            </div>
            <div class="mb-3">
                <label class="form-label">End Date</label>
                <input type="date" class="form-control" id="editRequestEndDate" value="${request.endDate}">
            </div>
            <div class="mb-3">
                <label class="form-label">Status</label>
                <select class="form-select" id="editRequestStatus">
                    <option ${request.status === 'Pending' ? 'selected' : ''}>Pending</option>
                    <option ${request.status === 'Approved' ? 'selected' : ''}>Approved</option>
                    <option ${request.status === 'Rejected' ? 'selected' : ''}>Rejected</option>
                </select>
            </div>
        `;
        
        // Set up save button functionality
        document.getElementById('saveChangesBtn').onclick = function() {
            // Calculate days difference
            const startDate = new Date(document.getElementById('editRequestStartDate').value);
            const endDate = new Date(document.getElementById('editRequestEndDate').value);
            const timeDiff = endDate - startDate;
            const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24)) + 1; // Add 1 to include both start and end dates
            
            // Update the request
            leaveRequests[index] = {
                id: document.getElementById('editRequestId').value,
                employee: document.getElementById('editRequestEmployee').value,
                type: document.getElementById('editRequestType').value,
                startDate: document.getElementById('editRequestStartDate').value,
                endDate: document.getElementById('editRequestEndDate').value,
                days: daysDiff,
                status: document.getElementById('editRequestStatus').value
            };
            
            renderLeaveRequestsTable();
            editModal.hide();
            alert('Leave request updated successfully!');
        };
        
        editModal.show();
    }

    function editLeaveBalance(index) {
        const balance = leaveBalances[index];
        document.getElementById('editModalBody').innerHTML = `
            <div class="mb-3">
                <label class="form-label">Employee</label>
                <input type="text" class="form-control" id="editBalanceEmployee" value="${balance.employee}">
            </div>
            <div class="mb-3">
                <label class="form-label">Annual Leave</label>
                <input type="number" step="0.5" class="form-control" id="editBalanceAnnual" value="${balance.annual}">
            </div>
            <div class="mb-3">
                <label class="form-label">Sick Leave</label>
                <input type="number" class="form-control" id="editBalanceSick" value="${balance.sick}">
            </div>
            <div class="mb-3">
                <label class="form-label">Maternity Leave</label>
                <input type="number" class="form-control" id="editBalanceMaternity" value="${balance.maternity}">
            </div>
            <div class="mb-3">
                <label class="form-label">Paternity Leave</label>
                <input type="number" class="form-control" id="editBalancePaternity" value="${balance.paternity}">
            </div>
            <div class="mb-3">
                <label class="form-label">Last Updated</label>
                <input type="date" class="form-control" id="editBalanceLastUpdated" value="${balance.lastUpdated}">
            </div>
        `;
        
        // Set up save button functionality
        document.getElementById('saveChangesBtn').onclick = function() {
            leaveBalances[index] = {
                employee: document.getElementById('editBalanceEmployee').value,
                annual: parseFloat(document.getElementById('editBalanceAnnual').value),
                sick: parseInt(document.getElementById('editBalanceSick').value),
                maternity: parseInt(document.getElementById('editBalanceMaternity').value),
                paternity: parseInt(document.getElementById('editBalancePaternity').value),
                unpaid: balance.unpaid, // Keep existing value
                lastUpdated: document.getElementById('editBalanceLastUpdated').value
            };
            
            renderLeaveBalancesTable();
            editModal.hide();
            alert('Leave balance updated successfully!');
        };
        
        editModal.show();
    }

    function editLeaveType(index) {
        const type = leaveTypes[index];
        document.getElementById('editModalBody').innerHTML = `
            <div class="mb-3">
                <label class="form-label">Leave Type</label>
                <input type="text" class="form-control" id="editTypeType" value="${type.type}">
            </div>
            <div class="mb-3">
                <label class="form-label">Description</label>
                <textarea class="form-control" id="editTypeDescription">${type.description}</textarea>
            </div>
            <div class="mb-3">
                <label class="form-label">Max Days</label>
                <input type="text" class="form-control" id="editTypeMaxDays" value="${type.maxDays}">
            </div>
            <div class="mb-3">
                <label class="form-label">Carry Forward</label>
                <input type="text" class="form-control" id="editTypeCarryForward" value="${type.carryForward}">
            </div>
        `;
        
        // Set up save button functionality
        document.getElementById('saveChangesBtn').onclick = function() {
            leaveTypes[index] = {
                type: document.getElementById('editTypeType').value,
                description: document.getElementById('editTypeDescription').value,
                maxDays: document.getElementById('editTypeMaxDays').value,
                carryForward: document.getElementById('editTypeCarryForward').value
            };
            
            renderLeaveTypesTable();
            editModal.hide();
            alert('Leave type updated successfully!');
        };
        
        editModal.show();
    }

    // Delete functions
    function confirmDelete(type, index) {
        itemToDelete = { type, index };
        deleteModal.show();
    }

    document.getElementById('confirmDeleteBtn').addEventListener('click', function() {
        if (itemToDelete.type === 'request') {
            leaveRequests.splice(itemToDelete.index, 1);
            renderLeaveRequestsTable();
        } else if (itemToDelete.type === 'balance') {
            leaveBalances.splice(itemToDelete.index, 1);
            renderLeaveBalancesTable();
        } else if (itemToDelete.type === 'type') {
            leaveTypes.splice(itemToDelete.index, 1);
            renderLeaveTypesTable();
        }
        deleteModal.hide();
        alert('Record deleted successfully!');
    });

    // Approve/reject functions
    function approveLeaveRequest(index) {
        leaveRequests[index].status = "Approved";
        renderLeaveRequestsTable();
        alert('Leave request approved successfully!');
    }

    function rejectLeaveRequest(index) {
        leaveRequests[index].status = "Rejected";
        renderLeaveRequestsTable();
        alert('Leave request rejected successfully!');
    }

    // Filter reset functions
    document.getElementById('resetRequestFilters').addEventListener('click', function() {
        document.getElementById('requestEmployeeFilter').value = '';
        document.getElementById('requestTypeFilter').value = '';
        document.getElementById('requestStatusFilter').value = '';
        renderLeaveRequestsTable();
    });

    document.getElementById('resetBalanceFilters').addEventListener('click', function() {
        document.getElementById('balanceEmployeeFilter').value = '';
        renderLeaveBalancesTable();
    });

    document.getElementById('resetTypeFilters').addEventListener('click', function() {
        document.getElementById('typeNameFilter').value = '';
        renderLeaveTypesTable();
    });

    // Filter change handlers
    document.getElementById('requestEmployeeFilter').addEventListener('input', renderLeaveRequestsTable);
    document.getElementById('requestTypeFilter').addEventListener('change', renderLeaveRequestsTable);
    document.getElementById('requestStatusFilter').addEventListener('change', renderLeaveRequestsTable);
    document.getElementById('balanceEmployeeFilter').addEventListener('input', renderLeaveBalancesTable);
    document.getElementById('typeNameFilter').addEventListener('input', renderLeaveTypesTable);

    // Profile dropdown functionality
    document.getElementById("profile-btn").addEventListener("click", function(event) {
        event.preventDefault()
        document.getElementById("dropdown-menu").classList.toggle("show")
    })
    
    document.addEventListener("click", function(event) {
        if (!document.getElementById("profile-btn").contains(event.target)) {
            document.getElementById("dropdown-menu").classList.remove("show")
        }
    })

    function openTab(evt, tabName) {
        var i, tabcontent, tabbuttons
        
        // Hide all tab content
        tabcontent = document.getElementsByClassName("tab-content")
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].classList.remove("active")
        }
        
        // Remove active class from all tab buttons
        tabbuttons = document.getElementsByClassName("tab-button")
        for (i = 0; i < tabbuttons.length; i++) {
            tabbuttons[i].classList.remove("active")
        }
        
        // Show the current tab and add active class to the button
        document.getElementById(tabName).classList.add("active")
        evt.currentTarget.classList.add("active")
    }

    // Charts initialization
    document.addEventListener('DOMContentLoaded', function () {
        // Leave Trend Chart
        const leaveTrendCtx = document.getElementById('leaveTrendChart')
        if (leaveTrendCtx) {
            new Chart(leaveTrendCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct'],
                    datasets: [{
                        label: 'Leave Days Taken',
                        data: [45, 60, 55, 70, 65, 80, 75, 90, 85, 70],
                        backgroundColor: '#007bff',
                        borderColor: '#007bff',
                        borderWidth: 2,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Monthly Leave Trends',
                            font: { size: 16 }
                        },
                        legend: { position: 'bottom' }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Leave Days Taken'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Month'
                            }
                        }
                    }
                }
            })
        }

        // Leave Type Distribution Chart
        const leaveTypeCtx = document.getElementById('leaveTypeDistribution')
        if (leaveTypeCtx) {
            new Chart(leaveTypeCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Annual Leave', 'Sick Leave', 'Maternity Leave', 'Paternity Leave', 'Unpaid Leave'],
                    datasets: [{
                        data: [35, 25, 15, 5, 20],
                        backgroundColor: [
                            '#007bff',
                            '#28a745',
                            '#ffc107',
                            '#dc3545',
                            '#6c757d'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Leave Type Distribution',
                            font: { size: 16 }
                        },
                        legend: { position: 'bottom' }
                    }
                }
            })
        }
        
        // Render all tables on page load
        renderTables();
    })

    // Form submission
    document.getElementById('leaveRequestForm').addEventListener('submit', function(e) {
        e.preventDefault()
        alert('Leave request submitted successfully!')
        this.reset()
    })
</script>
</body>
</html>